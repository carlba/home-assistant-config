computer:
  alias: Computer
  sequence:
    - service: homeassistant.turn_on
      data:
        entity_id:
          - light.desktop
          - switch.screen

media_backlight:
  alias: Media Backlight
  sequence:
    - service: media_player.turn_on
      entity_id: media_player.shield_3
    - service: homeassistant.turn_off
      data:
        entity_id:
          - switch.screen
          - light.living_area_lights
          - light.kitchen_table
          - light.hallway_ceiling
          - light.bathroom_ceiling
    - service: light.turn_on
      data:
        entity_id: light.behind_tv
        brightness_pct: 10
    - service: xiaomi_miio.fan_set_favorite_level
      data:
        entity_id: fan.xiaomi_miio_device
        level: 1
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

media_dark:
  alias: Media Dark
  sequence:
    - service: media_player.turn_on
      entity_id: media_player.shield_3
    - service: homeassistant.turn_off
      data:
        entity_id:
          - switch.screen
          - light.living_area_lights
          - light.kitchen_table
          - light.hallway_ceiling
          - light.bathroom_ceiling
    - service: xiaomi_miio.fan_set_favorite_level
      data:
        entity_id: fan.xiaomi_miio_device
        level: 1
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

daytime:
  alias: Daytime
  sequence:
    - service: light.turn_on
      data:
        entity_id: light.living_area_lights
        brightness: 255
        color_temp: 340
    - service: light.turn_on
      data:
        entity_id: light.kitchen_table
        brightness_pct: 40
        color_temp: 340
    # https://www.home-assistant.io/components/fan.xiaomi_miio
    - service: xiaomi_miio.fan_set_favorite_level
      data:
        entity_id: fan.xiaomi_miio_device
        level: 3
    - service: fan.set_speed
      data:
        entity_id: fan.xiaomi_miio_device
        speed: Favorite
    - service: xiaomi_miio.fan_set_led_on
      entity_id: fan.xiaomi_miio_device

cozy:
  alias: Cozy
  sequence:
    - service: light.turn_on
      data:
        entity_id:
          - light.living_area_lights
        brightness_pct: 60
        color_temp: 500
    - service: light.turn_on
      entity_id: light.kitchen_table
      data:
        brightness_pct: 30
        color_temp: 500
    - service: light.turn_on
      data:
        entity_id: light.desktop
        brightness_pct: 40
        color_temp: 500
    # https://www.home-assistant.io/components/fan.xiaomi_miio
    - service: fan.set_speed
      data:
        entity_id: fan.xiaomi_miio_device
        speed: Favorite
    - service: xiaomi_miio.fan_set_favorite_level
      data:
        entity_id: fan.xiaomi_miio_device
        level: 1
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

sleep_now:
  alias: Sleep now
  sequence:
    - service: light.turn_off
      data:
        entity_id:
          - light.kitchen_fan
          - light.kitchen_table
          - light.hallway_ceiling
          - light.desktop
          - light.turn_off
          - light.behind_tv
          - light.bed
          - light.frank
    - service: fan.set_speed
      data:
        entity_id: fan.xiaomi_miio_device
        speed: Silent
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

sleep_in_ten_min:
  alias: Sleep 10
  sequence:
    - service: light.turn_off
      data:
        entity_id:
          - light.kitchen_fan
          - light.kitchen_table
          - light.hallway_ceiling
          - light.desktop
          - light.frank
    - service: light.turn_off
      data:
        entity_id: light.behind_tv
        transition: 120
    - service: light.turn_off
      data:
        entity_id: light.bed
        transition: 600
    - service: fan.set_speed
      data:
        entity_id: fan.xiaomi_miio_device
        speed: Silent
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

sleep_in_an_hour:
  alias: Sleep 2H
  sequence:
    - service: light.turn_off
      entity_id:
        - light.kitchen_fan
        - light.kitchen_table
      data:
        transition: 1800
    - service: light.turn_off
      entity_id:
        - light.behind_tv
        - light.desktop
        - light.bed
        - light.frank
      data:
        transition: 3600
    - delay:
        seconds: 900
    - service: notify.gassistant
      entity_id: media_player.home
      data:
        message: Time to sleep in 45 minutes
    - delay:
        seconds: 1800
    - service: tts.google_say
      entity_id: media_player.home
      data:
        message: Time to sleep in 15 minutes
    - service: switch.turn_off
      entity_id: switch.screen
    - service: fan.set_speed
      data:
        entity_id: fan.xiaomi_miio_device
        speed: Silent
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

wakeup_in_half_an_hour:
  alias: Wakeup in 30 minutes
  sequence:
    - service: light.turn_on
      data:
        entity_id:
          - light.kitchen_fan
          - light.kitchen_table
          - light.behind_tv
          - light.desktop
          - light.frank
        brightness_pct: 10
        color_temp: 450
    - service: light.turn_on
      entity_id:
        - light.kitchen_fan
        - light.behind_tv
        - light.desktop
        - light.frank
      data:
        transition: 1800
        brightness_pct: 100
        color_temp: 340
    - delay:
        seconds: 900
    - service: light.turn_on
      data:
        entity_id:
          - light.bed
          - light.kitchen_table
        brightness_pct: 10
        color_temp: 450
    - service: light.turn_on
      entity_id:
        - light.bed
      data:
        transition: 900
        brightness_pct: 40
        color_temp: 340
    - service: light.turn_on
      data:
        transition: 900
        entity_id: light.kitchen_table
        brightness_pct: 40
        color_temp: 340
    - delay:
        seconds: 900
    - service: tts.google_say
      entity_id: media_player.home
      data:
        message: Good morning!

work:
  alias: Work
  sequence:
    - service: xiaomi_miio.fan_set_favorite_level
      data:
        entity_id: fan.xiaomi_miio_device
        level: 9

early_morning:
  alias: Early Morning
  sequence:
    - service: light.turn_on
      data:
        entity_id:
          - light.behind_tv
          - light.kitchen_fan
          - light.desktop
        brightness_pct: 10
        color_temp: 450
    - service: light.turn_off
      data:
        entity_id:
          - light.frank
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

dinner:
  alias: Dinner
  sequence:
    - service: homeassistant.turn_off
      data:
        entity_id:
          - switch.screen
          - hallway_ceiling
    - service: light.turn_on
      data:
        entity_id: light.living_area_lights
        brightness_pct: 70
        color_temp: 450
    - service: light.turn_on
      data:
        entity_id: light.kitchen_table
        brightness_pct: 40
        color_temp: 450
    - service: xiaomi_miio.fan_set_led_off
      entity_id: fan.xiaomi_miio_device

clean_kitchen:
  alias: Clean Kitchen
  sequence:
   - service: vacuum.send_command
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       command: app_segment_clean
       params: [17]

clean_hallway:
  alias: Clean Hallway
  sequence:
   - service: vacuum.send_command
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       command: app_segment_clean
       params: [18]

clean_living_room:
  alias: Clean Living Room
  sequence:
   - service: vacuum.send_command
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       command: app_segment_clean
       params: [16]

lg_tv_on:
  sequence:
    - service: remote.send_command
      entity_id: remote.harmony_hub
      data:
        device: 56823523
        command: PowerOn

lg_tv_off:
  sequence:
    - service: remote.send_command
      entity_id: remote.harmony_hub
      data:
        device: 56823523
        command: PowerOff

lg_amp_display_off:
  sequence:
    - service: remote.send_command
      entity_id: remote.harmony_hub
      data:
        device: 56825445
        command: Sleep

anslut_fan_turn_on:
  sequence:
    - service: switch.turn_on
      entity_id: switch.anslut_fan
    - service: remote.send_command
      entity_id: remote.harmony_hub
      data:
        device: 63692557
        command: PowerToggle

anslut_fan_turn_off:
  sequence:
    - service: switch.turn_off
      entity_id: switch.anslut_fan

anslut_fan_swing_on:
  sequence:
    - service: switch.turn_off
      entity_id: switch.anslut_fan
    - service: switch.turn_on
      entity_id: switch.anslut_fan      
    - service: remote.send_command
      entity_id: remote.harmony_hub
      data:
        device: 63692557
        command: PowerToggle
    - service: remote.send_command
      entity_id: remote.harmony_hub
      data:
        device: 63692557
        command: Swing

broadcast:
  sequence:
    - service: notify.gassistant
      data_template:
        message: '{{ states("input_text.broadcast") }}'

# The return_to_base command does not work if executed without first pausing and waiting 1 sec
xiaomi_vacuum_cleaner_return_to_base:
  sequence:
    - service: vacuum.pause
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
    - delay: 1
    - service: vacuum.return_to_base
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
